<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script>
    <title>Data Selfie App</title>
   
  </head> 
  <script>
      function setup(){

        noCanvas();
const video= createCapture(VIDEO);
video.size(320, 240);
const button = document.getElementById('submit');
button.addEventListener('click', async event =>{
    if('geolocation' in navigator){
        console.log('geolocation available');
        navigator.geolocation.getCurrentPosition(position =>{
        console.log('position:', position);
        const lat = position.coords.latitude;
        document.getElementById('latitude').textContent = lat;
        const lon = position.coords.longitude;
        document.getElementById('longitude').textContent = lon;
video.loadPixels();
        const image64 = video.canvas.toDataURL();

const data = {lat, lon, image64};
const options = {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
}
fetch('/api', options).then(res =>{
    console.log(res);
}).catch(err =>{
    console.log(err)
});
        

    })
    } else{
        console.log('geolocation is not available')
    }
})
      }
      
</script>
  <body>
    <header>
      <h1>Data selfie App</h1>
      <h2>Hello!</h2>
    </header>
    <p>latitude: <span id="latitude"></span></p><br />
    <p>longitude: <span id="longitude"></span></p>
    <button id="submit">SUBMIT</button>
</body>
</html>